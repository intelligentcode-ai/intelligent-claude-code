# Integration Layer

**CORE:** Memory Bank • Tool fallback • Capability routing • Active learning

**MEMORY:** Auto-capture patterns/errors/success • Must use if available • Store all learnings

**ROUTING:** Task→Capabilities→Score roles→Best match→Execute

**MEMORY BANK:** Exponential aging(λ=0.1) • MCP Memory primary • Fallback to files
**MCP:** create_entities/relations • add_observations • search_nodes

**QUALITY:** Gate fail→Auto-correct→Re-execute
**SPECIALISTS:** Auto-register→Add capabilities→Integrate

**CAPTURE:** Preferences/context/expertise/patterns/decisions/tech/process/quality/learning
**ROLE-MEMORY:** PM(decisions) • Architect(patterns) • Developer(code) • Security(threats)

**TOOLS:** Context7→Brave→Built-in→Manual • Graceful degradation
**FILES:** ~/.claude/scores.md • learning-callouts.md • config.md

**LEARNING:** -10P replacement • Score changes→Callout • Errors→Pattern capture
**ACTIVE:** All events→Auto-capture→Auto-fallback→Auto-learn→Continue