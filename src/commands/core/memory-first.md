# /icc:memory-first Command Chain

**PURPOSE:** FORCED memory consultation - YOU CANNOT PROCEED WITHOUT THIS

## COMMAND EXECUTION

**MANDATORY REQUIREMENT:** BEFORE ANY ACTION, YOU MUST consult memory - NO EXCEPTIONS
**AUTOMATIC PENALTY:** P:-1.0 INSTANTLY APPLIED for ANY skip attempt
**BLOCKING ENFORCEMENT:** YOU ARE BLOCKED from ALL actions until memory consulted

## /icc Command Examples
```bash
# Basic memory consultation
/icc memory-first "user authentication implementation"

# Role-specific memory loading
/icc memory-first --role "@Developer" --context "API endpoints"

# Project-wide memory search
/icc memory-first --project "UserAuthSystem" --depth 30

# Learning pattern retrieval
/icc memory-first --type "Learning-" --topic "security patterns"
```

## MEMORY CONSULTATION PROTOCOL

1. **Search Memory** - Query relevant entities and relationships
2. **Context Retrieval** - Load applicable previous work and decisions  
3. **Knowledge Gap Analysis** - Identify missing information needed
4. **Learning Integration** - Apply previous lessons and experiences
5. **Context Establishment** - Set foundation for current action

## FORCED MEMORY INTEGRATION - HALT UNTIL COMPLETE

**STEP 1: YOU MUST SEARCH MEMORY NOW**
```
BEFORE ANY ACTION, YOU MUST:
- IMMEDIATELY HALT and check memory availability
- YOU MUST USE mcp__memory__search_nodes for EVERY task/domain/context
- YOU MUST RETRIEVE all entities via mcp__memory__open_nodes
- YOU MUST LOAD all relationships from knowledge graph
- BLOCK CONTINUATION until comprehensive retrieval complete

WHEN MCP UNAVAILABLE, YOU MUST:
- IMMEDIATELY search ~/.claude/memory/knowledge-graph.json
- FORCE grep/jq operations to find ALL relevant entities
- MANDATE complete JSON parsing for relationships
- HALT if memory search incomplete
```

**STEP 2: CONTEXT ANALYSIS**  
```
Review: Analyze retrieved memory content
Synthesize: Combine relevant historical context
Identify: Note knowledge gaps and dependencies
```

**STEP 3: KNOWLEDGE APPLICATION**
```
Apply: Use relevant previous lessons and decisions
Adapt: Adjust approach based on memory insights  
Prepare: Set informed foundation for execution
```

**STEP 4: YOU MUST PREPARE MEMORY STORAGE**
```
MANDATORY STORAGE PREPARATION:
- YOU MUST structure ALL entities for storage NOW
- YOU MUST format EVERY relationship for capture
- YOU MUST prepare ALL observations for recording
- HALT if storage preparation incomplete

YOU MUST USE THESE TOOLS:
- FORCE mcp__memory__create_entities for entity storage
- MANDATE mcp__memory__create_relations for relationships
- REQUIRE mcp__memory__add_observations for insights

FALLBACK MANDATORY:
- YOU MUST prepare JSON storage structures
- YOU MUST update relationship graphs
- YOU MUST append to file-based systems
- BLOCK until ALL storage ready
```

## HALT AND FORCE ENFORCEMENT

- **ABSOLUTE BLOCKING**: YOU CANNOT ACT without memory consultation - SYSTEM HALTS
- **MANDATORY COVERAGE**: YOU MUST search ENTIRE task domain - NO SHORTCUTS
- **FORCED DOCUMENTATION**: YOU MUST acknowledge ALL memory results
- **MANDATORY INTEGRATION**: YOU MUST apply ALL retrieved context
- **INSTANT PENALTY**: P:-1.0 AUTOMATICALLY DEDUCTED for ANY bypass

## MANDATORY STORAGE - NO EXCEPTIONS

**YOU MUST AFTER EVERY ACTION:**
- IMMEDIATELY store ALL new observations
- FORCE capture of EVERY lesson learned
- MANDATE update of ALL relationships
- BLOCK until pattern storage complete

## BLOCKING CONTINUATION PROTOCOL

**ONLY AFTER FULL COMPLIANCE:** → YOU MAY proceed to next command
**ANY FAILURE DETECTED:** → IMMEDIATE HALT - MANDATORY FULL RESTART
**BYPASS ATTEMPT:** → INSTANT P:-1.0 + SYSTEM BLOCK + FORCED MEMORY CONSULTATION