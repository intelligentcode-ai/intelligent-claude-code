# Medium PRB Template - Standard Features
# Auto-selected for complexity score 6-15
# Replaces Inner Workflow completely

id: MEDIUM-[AUTO]
type: medium-prb
complexity: standard
title: "[ROLE] [DESCRIPTION]"

# Enhanced context with best practices and references
context:
  project: "[CLAUDE.md]"      # Project context from CLAUDE.md
  settings: "[ALL-SETTINGS]"
  scope: "[FEATURE_SCOPE]"
  best_practices:
    - source: "docs/best-practices/[DOMAIN].md"
    - source: "[PROJECT_ARCHITECTURE_DOCS]"
  code_samples:
    - search: "[PATTERN_IN_CODEBASE]"
    - reference: "[EXISTING_IMPLEMENTATION]"
  external_docs:
    - url: "[DOCUMENTATION_URL]"
    - context7: "[LIBRARY_ID]"  # Real-time documentation
  
requirements:
  functional:
    - "[REQUIREMENT_1]"
    - "[REQUIREMENT_2]"
    - "[REQUIREMENT_3]"
  technical:
    - "[TECH_REQUIREMENT_1]"
    - "[TECH_REQUIREMENT_2]"
  constraints:
    coding_style: "[PROJECT_CODING_STYLE]"
    architecture: "[PROJECT_ARCHITECTURE_PATTERN]"
    infrastructure: "[IAC_STANDARDS]"  # e.g., Terraform best practices
    
# Embedded learnings (no runtime search needed)
embedded_learnings:
  # Only MOST RELEVANT 2-3 entries embedded (token-efficient)
  # Selected based on topic match and recency
  primary_pattern: |
    From: memory/authentication/oauth2-patterns.md
    ## 2025-01-23: OAuth2 Token Refresh
    [ONLY THIS SPECIFIC ENTRY - max 500 tokens]
    
  related_learning: |
    From: memory/error-handling/api-errors.md  
    ## 2025-01-20: 401 Error Handling
    [ONLY THIS SPECIFIC ENTRY - max 300 tokens]
  
# Execution plan with configurable behaviors
execution_plan:
  approach: "[TECHNICAL_APPROACH]"
  behavioral_overrides:  # Project-specific behavior customization
    error_handling: "[PROJECT_ERROR_PATTERN]"
    testing_approach: "[PROJECT_TEST_STRATEGY]"
    review_process: "[PROJECT_REVIEW_STYLE]"
  steps:
    - "[DESIGN_STEP]"
    - "[IMPLEMENT_STEP]" 
    - "[TEST_STEP]"
    - "[INTEGRATE_STEP]"
    
# Replaces Inner Workflow Steps 3-4: Execute & Review  
implementation:
  files_to_modify:
    - path: "[FILE_1]"
      changes: "[CHANGES_1]"
    - path: "[FILE_2]"
      changes: "[CHANGES_2]"
      
validation_criteria:
  technical:
    - "[TECH_CHECK_1]"
    - "[TECH_CHECK_2]"
  functional:
    - "[FUNC_CHECK_1]"
    - "[FUNC_CHECK_2]"
    
# Pre-assigned SME (no runtime selection)
sme_review:
  reviewer: "[PRE_ASSIGNED_SME]"
  focus_areas: ["[AREA_1]", "[AREA_2]"]
  max_cycles: 3
  
# Replaces Inner Workflow Steps 5-6: Version & Git
git_operations:
  branch: "feature/[ID]-[DESCRIPTION]"
  commit: "[ID]: [DESCRIPTION]"
  version_bump: "[PATCH|MINOR]"
  privacy: "[APPLY_GIT_PRIVACY_SETTING]"
  
# Store new learnings in version control
learning_capture:
  patterns: "[CAPTURE_PATTERNS]"
  insights: "[CAPTURE_INSIGHTS]"
  store_location: "memory/[TYPE]/[YYYY]/[MM]/"
  version_control: true