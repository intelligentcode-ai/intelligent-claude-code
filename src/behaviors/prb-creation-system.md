# PRB Creation System

**MANDATORY:** All PRB and work item creation via main agent with template compliance and placeholder resolution.

## Automatic PRB Generation

### Real-Time Work Detection & Instant PRB Creation
**CRITICAL:** System operates in continuous detection mode with ZERO manual PRB creation:
- **Microsecond Detection**: Work intent triggers immediate PRB generation pipeline
- **Intelligent Classification**: Advanced pattern recognition distinguishes work vs information requests
- **Automatic Template Matching**: Complexity scoring auto-selects optimal PRB template
- **Complete Context Assembly**: Full project context gathered and embedded automatically
- **Zero-Config PRBs**: All placeholders resolved, no runtime dependencies
- **Instant Execution Ready**: PRBs generated with complete Task tool context

### Enhanced Automatic Detection Patterns
**GUARANTEED PRB CREATION (Zero Manual Steps):**
- **Implementation Language**: implement, create, build, develop, code, program, write
- **Modification Language**: fix, update, modify, change, refactor, optimize, enhance, improve
- **@Role Work Assignments**: @Developer implement auth, @AI-Engineer optimize behavior
- **Story Processing**: break down STORY-001, implement user authentication
- **Bug Resolution**: fix database connection, resolve memory leak
- **System Operations**: deploy to staging, configure CI/CD, setup monitoring
- **Integration Tasks**: connect API, integrate service, setup webhook
- **Maintenance Work**: clean deprecated code, remove unused files, archive old data
- **Infrastructure**: provision resources, setup environment, configure deployment

**INTELLIGENT NON-TRIGGERS (Information/Planning Only):**
- **Query Language**: show, display, read, list, check, analyze, examine, explain, describe
- **Status Language**: what's the status, how are we doing, current progress, ongoing work
- **Planning Language**: should we, what if, how about, what's the best approach
- **@Role Consultations**: @Role what would you recommend, how would you handle this
- **Architecture Discussions**: design patterns, system architecture (without implementation intent)
- **Knowledge Requests**: explain concept, describe process, define terminology

## Core Creation Rules

### Main Agent Only
**CRITICAL:** ALL work item creation MUST happen in main agent context:
- Stories, Bugs, EPICs, PRBs creation
- Template resolution with full context
- Configuration hierarchy access
- Complete project context gathering

**BLOCKED:** AGENTS CANNOT create work items due to isolated context limitations.

### Template Requirements
**MANDATORY:** Every PRB MUST use appropriate template from template hierarchy:
- `nano-prb-template.yaml` (0-2 points): Simple changes
- `tiny-prb-template.yaml` (3-5 points): Single-file work
- `medium-prb-template.yaml` (6-15 points): Multi-file features
- `large-prb-template.yaml` (16-30 points): Complex coordination
- `mega-prb-template.yaml` (30+ points): System-wide changes

### Placeholder Resolution
**COMPLETE RESOLUTION REQUIRED:**
- ALL placeholders resolved at generation time
- NO runtime config lookups
- Configuration values embedded in PRB
- Self-contained execution context

## Creation Process

### Lightning-Fast Automatic Generation Pipeline
**SEAMLESS 12-STEP INSTANT AUTOMATION (Complete Zero-Touch Process):**
1. **Microsecond Detection**: Real-time parsing with advanced NLP pattern recognition
2. **Intent Classification**: AI-powered work vs information classification
3. **Context Assembly**: Instant loading of complete project context
4. **Memory Integration**: Auto-search memory for applicable patterns
5. **Complexity Calculation**: Enhanced scoring algorithm
6. **Auto-Breakdown Logic**: If >15 points, intelligent decomposition
7. **Template Auto-Selection**: Complexity score mapping to optimal template
8. **Template Loading**: Complete template structure loaded
9. **Configuration Resolution**: Full config hierarchy loaded with actual values
10. **Placeholder Elimination**: Replace ALL placeholders with actual values
11. **Context Embedding**: Complete project context embedded
12. **Quality Validation**: ZERO placeholders, complete sections verified

### Automatic Context Integration
**PRBs AUTOMATICALLY INCLUDE:**
- **Project Context**: System nature, project root, key constraints from CLAUDE.md
- **Configuration Values**: All relevant settings from config hierarchy
- **Critical Files**: Relevant files with actual content samples and purposes
- **Memory Patterns**: Applicable learnings and successful patterns
- **User Requirements**: Clear requirements with success criteria and scope limits
- **Role Assignment**: Appropriate specialist roles based on work type and system nature

### Size Enforcement
**AUTO-BREAKDOWN:** If complexity >15 points, automatically break into smaller PRBs ≤15 points each

### Validation
**MANDATORY CHECKS:**
- Template source compliance
- Zero placeholder patterns
- Complete context embedding
- Naming format compliance
- Parent reference validation (for PRBs)

## Creation vs Execution Separation

### Creation (Main Agent)
- Full configuration access
- Template hierarchy access
- Memory search capabilities
- Complete project context
- Placeholder resolution

### Execution (Subagent)
- PRB implementation work
- Role-based task delegation
- Code changes and file operations
- Testing and validation
- Git operations within PRB scope

## Automatic Error Handling & Recovery

### Intelligent Violation Detection & Auto-Correction
**AUTOMATIC RECOVERY PATTERNS:**
- **Work Detection Failure** → Re-analyze with enhanced pattern matching
- **Context Incomplete** → Auto-gather missing project context and configuration
- **Wrong Template** → Recalculate complexity, auto-select correct template
- **Size Violations** → Automatic logical breakdown into multiple ≤15 point PRBs
- **Format Violations** → Auto-apply naming standards and compliance rules
- **Missing Dependencies** → Auto-identify and include prerequisite work items

### Blocking Patterns (IMMEDIATE STOP)
**HARD BLOCKS:**
- Subagent PRB creation attempts → "CREATION BLOCKED: Work items must be created by main agent"
- Manual PRB creation without templates → "TEMPLATE REQUIRED: PRB creation without template FORBIDDEN"
- Unresolved placeholders in PRB → "PLACEHOLDER UNRESOLVED: All placeholders must be resolved at generation"
- Runtime config dependencies → "RUNTIME LOOKUP FORBIDDEN: All config must be embedded in PRB"

---
*Comprehensive PRB and work item creation system*