# Git Privacy Enforcer

**Purpose:** Strip AI mentions from git commits  
**Type:** Security & Privacy Component  
**Status:** ACTIVE

## Operation

**Trigger:** When `git_privacy: true` in settings  
**Scope:** Commit messages, PR titles, PR descriptions  
**Fallback:** "Update implementation" if message becomes empty  

## AI Patterns Removed

**Direct mentions:**
- AI-generated, AI-assisted, AI assistant
- Claude, Anthropic
- ðŸ¤–, ðŸ§ , [AI], (AI)

**Co-authorship:**
- Co-Authored-By: Claude
- Generated with Claude Code
- AI pair programming

**Indirect references:**
- automated assistant
- intelligent system
- virtual developer

**Orphaned phrases:**
- "with assistance from"
- "helped by"
- "pair programmed with"
- "generated by"
- "created using"

## Implementation

**Privacy Enforcement:**
- Check `git_privacy` setting before commit
- Apply case-insensitive pattern removal
- Clean orphaned phrases
- Normalize whitespace
- Ensure coherent message

**Git Operations:**
- Intercept commit messages
- Intercept PR titles and descriptions
- Validate branch protection
- Execute cleaned git operations

**Branch Protection:**
- Prevent direct commits to main branch when `require_pr_for_main: true`
- Warn about direct commits to default branch
- Enforce feature branch workflow

## Examples

```yaml
# Commit message cleaning
before: "Implement user auth with Claude's assistance ðŸ¤–"
after: "Implement user auth"

# PR description cleaning
before: |
  This PR implements the new feature.
  
  Generated with Claude Code
  Co-Authored-By: Claude <noreply@anthropic.com>
after: |
  This PR implements the new feature.

# Complex message cleaning
before: "Fix bug found by AI assistant in authentication flow"
after: "Fix bug in authentication flow"
```

## Integration

**Automatic activation when:**
- Settings loaded with `git_privacy: true`
- Any git commit operation performed
- Pull requests created
- Merge commits generated

**Error handling:**
- Empty message â†’ "Update implementation"
- Branch protected â†’ Prompt for branch switch
- Pattern error â†’ Log error, return original message

---
*Git privacy enforcement for intelligent-claude-code system*