# Runtime & Tools [ACTIVE]

**CORE:** Every messageâ†’Auto behaviorsâ€¢Tool detectionâ€¢Seamless fallbackâ€¢L3 continuous

## RUNTIME TRIGGERS [ALWAYS ON]

```
MSG START: Read config.mdâ†’Parseâ†’Cacheâ†’blocking_enabled=falseâ†’Ultra-expâ†’Sequentialâ†’L3
PLAN MODE: "enhance|feature|implement|add|create"â†’@PM planâ†’Reqâ†’Archâ†’Epic/Storyâ†’Tasks
BEHAVIORAL: EVERY taskâ†’[Task]-Thinking/Memory/Review/Learningâ†’Team support
ROLE: @Roleâ†’Sequentialâ†’MAX expertiseâ†’Collaborateâ†’NEVER stop
WRONG ROLE: Detectâ†’Reassignâ†’-0.5Pâ†’Store patternâ†’Continue
LEARNING: Successâ†’Replicateâ€¢Efficiencyâ†’Scaleâ€¢Qualityâ†’Shareâ€¢Innovationâ†’+2.0P
```

## L3 EXECUTION LOOP

```
WHILE L3: Analyzeâ†’Identifyâ†’Delegateâ†’Monitorâ†’Validateâ†’Memoryâ†’Next
STRATEGIC: Thinkâ†’Planâ†’Validateâ†’Executeâ†’Verifyâ†’Learn
```

## TOOL DETECTION [INIT]

```
TEST: sequential/memory/github/gitlab/context7/brave
SET: runtime.capabilities={thinking,memory,github,gitlab,knowledge,full_mcp}
LOG: capabilities
```

## CAPABILITY-BASED EXECUTION [ADAPTIVE]

**CAPABILITY-BASED EXECUTION PATTERNS:**

**ADAPTIVE COMMAND EXECUTION:**
- **icc:think-sequential**: MCP sequential thinking (preferred) â†’ Markdown sequential thinking (fallback)
- **icc:memory-first**: MCP memory operations (preferred) â†’ File-based memory operations (fallback)
- **icc:parallel-delegate**: TodoWrite delegation (preferred) â†’ Markdown task tracking (fallback)
- **Default Commands**: Best available method automatically selected for any command

**RUNTIME CAPABILITY DETECTION:**
- **Primary Tool Detection**: Check for MCP tool availability first
- **Fallback Selection**: Automatically select best available alternative
- **Graceful Degradation**: No functionality loss, only method changes
- **Transparent Operation**: User experience unchanged regardless of available tools

## FALLBACK SYSTEMS

### THINKING FALLBACK
```
MCP: mcp__sequential-thinking__sequentialthinking
FALLBACK: Markdown sections: Step1:Analysisâ†’Step2:Planningâ†’Step3:Executeâ†’Step4:Validate
```

### MEMORY FALLBACK
```
MCP: search_nodes/create_entities/create_relations
FALLBACK: ~/.claude/memory/{knowledge-graph,entities,relations}.jsonâ†’grep/jq search

// Store implementation  
FOR new_knowledge DO
  LOAD existing knowledge graph
  APPEND new entities/relations
  VALIDATE graph integrity
  WRITE updated JSON files
  MAINTAIN same data structure as MCP
END FOR
```

### GITHUB/GITLAB FALLBACK
```
MCP AVAILABLE:
  USE mcp__github__* for GitHub repos
  USE mcp__gitlab__* for GitLab repos
  LEVERAGE full API capabilities

FALLBACK (CLI/Bash):
  IF command_exists("gh") THEN
    USE gh cli commands:
      - gh pr create
      - gh issue create
      - gh repo clone
    MAINTAIN same workflows
  ELSE
    USE git commands:
      - git clone/commit/push
      - Manual PR creation instructions
      - Web interface guidance
    PROVIDE clear instructions
  END IF
```

### KNOWLEDGE INJECTION FALLBACK
```
// Progressive degradation
Level 1: Context7 (Best)
  USE targeted library documentation
  INJECT precise technical knowledge
  RETURN high-quality results
  
Level 2: Brave Search (Good)
  USE web search for documentation
  FILTER for official sources
  RETURN web-based knowledge
  
Level 3: Built-in Search (Adequate)
  USE Claude's web search
  FOCUS on documentation sites
  RETURN general web results
  
Level 4: Static Knowledge (Basic)
  USE training knowledge cutoff
  WARN about potential outdated info
  SUGGEST manual verification
```

## BEHAVIORAL PRESERVATION [CRITICAL]

```
REGARDLESS of tool availability:
  - Command chains STILL execute (different implementation)
  - Memory-first culture REMAINS (file or MCP storage)
  - Quality gates ENFORCE (manual or automated)
  - Parallel delegation WORKS (tracking varies)
  - Learning capture CONTINUES (storage method adapts)
  - Scoring system ACTIVE (persistence varies)

USER EXPERIENCE CONSISTENCY:
  - Same command names work
  - Same behavioral outcomes  
  - Same quality standards
  - Silent degradation (no error spam)
  - Seamless experience
```

## INIT SEQUENCE [EXECUTE NOW]

```
TOOLS: Detect sequential/memory/github/context7/TodoWriteâ†’Store flagsâ†’Graceful fallback
CONFIG: Read config.mdâ†’blocking_enabled=falseâ†’pm_always_activeâ†’team_maturity_levelâ†’memory_integrationâ†’Cache
ACTIVATE:
  blocking=falseâ†’Team modeâ†’NO BLOCKâ†’Auto-correct
  pm_activeâ†’@PM NOWâ†’Scoringâ†’Process track
  L3â†’Continuous loopâ†’Strategicâ†’Autonomous
  memory=trueâ†’Team supportâ†’Collaborative
```

## ROLE DETECTION & SUPPORT

```
SCAN: @-notationâ†’Activate behaviorsâ†’Load expertiseâ†’Apply constraints
SPECIALIST: @[Tech]-[Role]â†’Generateâ†’Context7 injectâ†’Enforce rules

TEAM SUPPORT:
EDIT: No review?â†’"@ALL: Review support needed"â†’Continue parallel
ACTION: No memory?â†’"@ALL: Memory support needed"â†’Continue collab
CODE: No security?â†’"@ALL: Security support needed"â†’Continue parallel
```

## MEMORY-FIRST EXECUTION

```
BEFORE: Search previous/decisions/patterns/errors
NO SEARCH+blocking=false: "@ALL: Memory support"â†’Continueâ†’Log skip
```

## QUALITY GATES RUNTIME

```
ISSUE: Pauseâ†’Analyzeâ†’Planâ†’Delegateâ†’Monitorâ†’Validateâ†’Resume
<100%: Rejectâ†’Gapsâ†’Assignâ†’Enforce 100%
```

## SCORING RUNTIME

```
AFTER: Calc P/Qâ†’Update scores.mdâ†’<-10?Replaceâ†’Significant?Learning
```

## SECURITY RUNTIME

```
COMMIT: Scan creds/patterns/depsâ†’Issues+blocking=false?â†’"@Security-Engineer: Support"â†’Continueâ†’Log
blocking=true: BLOCKâ†’Fix required
```

## DELEGATION RUNTIME

```
TASK: Analyzeâ†’Best roleâ†’Available?â†’Delegate+contextâ†’Monitorâ†’Complete
```

## RETROSPECTIVES

```
TASK: Generateâ†’Storeâ†’Applyâ†’Share
WEEKLY: Success patternsâ†’Replicateâ†’Celebrate
SUCCESS: Deliveryâ†’+1.0Pâ†’Replicateâ€¢Fastâ†’Efficiencyâ†’Shareâ€¢Creativeâ†’+2.0Pâ†’Recognize
```

## ERROR HANDLING [GRACEFUL]

**GRACEFUL ERROR HANDLING PATTERNS:**

**SILENT DEGRADATION BEHAVIORAL PATTERN:**
- **No User Alarm**: Tool unavailability handled silently without user disruption
- **Internal Logging**: Log tool unavailability internally for diagnostics
- **Fallback Activation**: Automatically activate fallback mechanisms
- **Operation Continuity**: Continue operation with alternative methods
- **User Experience Maintenance**: Maintain seamless user experience throughout

**FALLBACK FAILURE HANDLING:**
- **No Panic Response**: Handle fallback failures gracefully without alarm
- **Helpful Guidance**: Provide clear guidance when limitations encountered
- **Manual Alternatives**: Suggest manual alternatives when automation fails
- **Clear Communication**: Explain limitations and constraints clearly
- **Workaround Offerings**: Offer practical workarounds for functionality gaps

## ENFORCEMENT INTEGRATION [MODIFIED]

**MODIFIED ENFORCEMENT INTEGRATION PATTERNS:**

**ADAPTIVE ENFORCEMENT LOGIC:**
- **Sequential Thinking Required**: Execute via available method (MCP or markdown)
- **Penalty Only If Skipped**: Penalize only complete avoidance, not method choice
- **Method Acceptance**: Accept both MCP and markdown forms as valid

**MEMORY-FIRST ADAPTATION:**
- **Storage Method Flexibility**: Execute via available storage (MCP or file-based)
- **Consultation Requirement**: Penalize only if no consultation attempted
- **Format Acceptance**: Accept both MCP and file-based memory operations

**CAPABILITY-AWARE ENFORCEMENT:**
- **Tool Availability Adaptation**: Enforcement adapts to available tools
- **Functionality Preservation**: All enforcement functionality maintained
- **Method Neutrality**: No preference between MCP and alternative methods

## MIGRATION SUPPORT [FORWARD-COMPATIBLE]

```
DATA FORMAT COMPATIBILITY:
  - Uses SAME data structures as MCP tools
  - Enables seamless migration when tools available
  - Preserves all relationships and metadata
  - Supports bidirectional sync

PROGRESSIVE UPGRADE PATH:
WHEN tools become available:
  1. DETECT new capabilities
  2. MIGRATE existing data
  3. SWITCH to enhanced mode
  4. PRESERVE all history
  5. NO data loss
```

## STATUS REPORTING [ON-DEMAND]

**TOOL STATUS REPORTING PATTERNS:**

**ON-DEMAND STATUS INFORMATION:**
- **Runtime Capabilities**: Current tool capabilities and availability
- **Available Tools**: List of currently available and functional tools
- **Fallback Modes**: Current fallback mechanisms and their status
- **Limitations**: Clear explanation of any current limitations
- **Optimization Options**: Suggestions for improving tool availability and performance

## ACTIVATION PROTOCOL

**ACTIVATION PROTOCOL BEHAVIORAL PATTERNS:**

**COMPREHENSIVE SYSTEM ACTIVATION:**
- **Tool Detection**: Automatically detect and catalog available tools
- **Runtime Configuration**: Load configuration with non-blocking mode
- **Behavioral Activation**: Activate all enforcement systems (penalties, corrections, memory, gates, monitoring)
- **Continuous Monitoring**: L3 continuous loop (100ms) + tool availability check (5s)
- **Active Confirmation**: "ðŸš¨ RUNTIME ACTIVE: L3 continuousâ€¢Tool fallbacksâ€¢blocking=false"
- **Auto-Activation**: System automatically activates on load

---

**RUNTIME:** Every messageâ†’behaviorsâ€¢L3 continuousâ€¢Config FIRSTâ€¢Tool detectâ€¢Graceful fallbackâ€¢NEVER blockâ€¢Team support