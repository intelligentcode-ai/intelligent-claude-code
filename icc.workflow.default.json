{
  "$schema": "./src/schemas/icc.workflow.schema.json",
  "version": "1.0.0",
  "description": "Workflow settings by AgentTask complexity tier",

  "nano": {
    "version_bump": false,
    "changelog_required": false,
    "pr_required": false,
    "merge_strategy": "direct_commit",
    "release_automation": false
  },

  "tiny": {
    "version_bump": true,
    "version_type": "patch",
    "changelog_required": true,
    "pr_required": false,
    "merge_strategy": "direct_commit",
    "release_automation": false
  },

  "medium": {
    "version_bump": true,
    "version_type": "minor",
    "changelog_required": true,
    "pr_required": true,
    "merge_strategy": "feature_branch",
    "release_automation": true,
    "auto_merge": false
  },

  "large": {
    "version_bump": true,
    "version_type": "minor",
    "changelog_required": true,
    "pr_required": true,
    "merge_strategy": "feature_branch",
    "release_automation": true,
    "auto_merge": false,
    "coordination_required": true
  },

  "mega": {
    "version_bump": true,
    "version_type": "major",
    "changelog_required": true,
    "pr_required": true,
    "merge_strategy": "feature_branch",
    "release_automation": true,
    "auto_merge": false,
    "coordination_required": true,
    "breaking_change_assessment": true
  },

  "release": {
    "enabled": true,
    "description": "Automated release pipeline configuration",

    "pipeline": {
      "merge": {
        "enabled": true,
        "strategy": "squash",
        "delete_branch": true,
        "require_approval": true,
        "comment": "squash=single commit (recommended), merge=preserve commits, rebase=linear history"
      },

      "tag": {
        "enabled": true,
        "format": "v{version}",
        "push": true,
        "comment": "Format supports placeholders: {version}, {date}, {branch}"
      },

      "github_release": {
        "enabled": true,
        "generate_notes": true,
        "draft": false,
        "prerelease": false,
        "notes_source": "changelog",
        "comment": "notes_source: changelog (from CHANGELOG.md) or commits (from git log)"
      },

      "cleanup": {
        "enabled": true,
        "delete_local_branch": true,
        "delete_remote_branch": true,
        "comment": "Cleanup happens after successful release only"
      }
    },

    "trivial_changes": {
      "auto_release": false,
      "patterns": [
        "docs:",
        "chore:",
        "style:"
      ],
      "comment": "Even trivial changes require explicit trigger - safety first"
    },

    "validation": {
      "require_version_bump": true,
      "require_changelog_update": true,
      "require_clean_working_tree": true,
      "require_ci_pass": true,
      "comment": "All validation must pass before release pipeline starts"
    }
  }
}
